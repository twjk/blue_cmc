<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>完整demo</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <script type="text/javascript" charset="utf-8" src="ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="ueditor.all.min.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="lang/zh-cn/zh-cn.js"></script>

    <style type="text/css">
        div{
            width:100%;
        }
    </style>
</head>
<body>
<div>
    <h1>完整demo</h1>
    <script id="uploadEditor" type="text/plain" style="display:none"></script>
</div>
<div id="btns">
    <div>
    	<button type="button" id="btnUploadImgs">多图上传</button>
		<ul id="upload_imgs_wrap"></ul>
		
		<button type="button" id="btnUploadImg">单图上传</button>
		<br/>
		<img id="upload_img" height="150">
		<br/>
		
		<button type="button" id="btnUploadFiles">文件上传</button>
		<ul id="upload_files_wrap"></ul>
    </div>
</div>

<script type="text/javascript">

    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
    //参考：http://www.dookay.com/n/10929
    
    var uploadEditor = UE.getEditor("uploadEditor", {
        isShow: false,
        focus: false,
        enableAutoSave: false,
        autoSyncData: false,
        autoFloatEnabled:false,
        wordCount: false,
        sourceEditor: null,
        scaleEnabled:true,
        toolbars: [["attachment","insertimage"]]
    });
	
	uploadEditor.ready(function () {
	    // 监听插入图片
	    uploadEditor.addListener("beforeInsertImage", _beforeInsertImage);
	    // 监听插入附件
    	uploadEditor.addListener("afterUpfile",_afterUpfile);
	});
	
	var uploadOper = "";
	document.getElementById('btnUploadImgs').onclick = function () {
		uploadOper = "uploadImgs";
	    var dialog = uploadEditor.getDialog("insertimage");
	    dialog.title = '多图上传';
	    dialog.render();
	    dialog.open();
	};
	
	document.getElementById('btnUploadImg').onclick = function () {
		uploadOper = "uploadImg";
	    var dialog = uploadEditor.getDialog("insertimage");
	    dialog.title = '图片上传';
	    dialog.render();
	    dialog.open();
	};
	
	document.getElementById('btnUploadFiles').onclick = function () {
	    var dialog = uploadEditor.getDialog("attachment");
	    dialog.title = '附件上传';
	    dialog.render();
	    dialog.open();
	};

	function _beforeInsertImage(t, result) {
		if(result.length==0) return;
	    var imageHtml = '';
	    if(uploadOper == "uploadImgs"){
		    for(var i in result){
		        imageHtml += '<li><img src="'+result[i].src+'" alt="'+result[i].alt+'" height="150"></li>';
		    }
		    document.getElementById('upload_imgs_wrap').innerHTML = imageHtml;
	    }else if(uploadOper == "uploadImg"){
	    	document.getElementById('upload_img').src = result[0].src;
	    }
	}
	
	function _afterUpfile(t, result) {
	    var fileHtml = '';
	    for(var i in result){
	        fileHtml += '<li><a href="'+result[i].url+'" target="_blank">'+result[i].url+'</a></li>';
	    }
	    document.getElementById('upload_files_wrap').innerHTML = fileHtml;
	}
</script>
</body>
</html>